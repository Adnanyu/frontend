{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useState}from'react';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{Login}from'../../store/userSlice';import{toast}from'react-toastify';export var useLoginHook=function useLoginHook(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({username:'',password:''}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevFormData){return _objectSpread(_objectSpread({},prevFormData),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var backEndLink;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setIsLoading(true);backEndLink=process.env.REACT_APP_BACKEND_URL;_context.prev=3;_context.next=6;return axios.post(\"\".concat(backEndLink,\"/users/login\"),_objectSpread({},formData),{withCredentials:true}).then(function(res){dispatch(Login(res.data.user));// alert(res.data.message)\ntoast.success(res.data.message,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});});case 6:navigate('/posts');_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);// alert(err.response.data);\ntoast.error(_context.t0.response.data,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});setIsLoading(false);case 13:console.log(formData);case 14:case\"end\":return _context.stop();}},_callee,null,[[3,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return{handleSubmit:handleSubmit,handleChange:handleChange,formData:formData,isLoading:isLoading,navigate:navigate};};","map":{"version":3,"names":["axios","useState","useNavigate","useDispatch","Login","toast","useLoginHook","dispatch","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","username","password","_useState4","formData","setFormData","navigate","handleChange","e","_e$target","target","name","value","prevFormData","_objectSpread","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","backEndLink","wrap","_callee$","_context","prev","next","preventDefault","process","env","REACT_APP_BACKEND_URL","post","concat","withCredentials","then","res","data","user","success","message","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","t0","error","response","console","log","stop","_x","apply","arguments"],"sources":["/Users/adnan/Desktop/projects/setup/client-side/src/routes/login/useLogin.js"],"sourcesContent":["import axios from 'axios';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Login } from '../../store/userSlice';\nimport { toast } from 'react-toastify';\n\nexport const useLoginHook = () => {\n  const dispatch = useDispatch()\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n  const navigate = useNavigate();\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevFormData) => ({ ...prevFormData, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true)\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    \n    try {\n      await axios\n        .post(\n          `${backEndLink}/users/login`,\n          { ...formData },\n          { withCredentials: true }\n        )\n        .then((res) => {\n          dispatch(Login(res.data.user))\n          // alert(res.data.message)\n          toast.success(res.data.message, {\n            position: \"top-right\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n            theme: \"light\",\n            })\n        });\n      navigate('/posts')\n    } catch (err) {\n      // alert(err.response.data);\n      toast.error(err.response.data, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        });\n      setIsLoading(false)\n    }\n\n    console.log(formData);\n  };\n    return {\n        handleSubmit,\n        handleChange,\n        formData,\n      isLoading,\n        navigate\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}