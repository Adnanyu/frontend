{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getPost } from '../../store/postSlice';\nimport { toast } from 'react-toastify';\nexport const useEditPost = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    post\n  } = useSelector(state => state.post);\n  const [loading, setLoading] = useState(true);\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState('');\n  const [links, setLinks] = useState(post.links);\n  const [image, setImage] = useState({});\n  const [body, setBody] = useState('');\n  const [listCount, setListCount] = useState([]);\n  const [path, setPath] = useState([]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getPost(id));\n    setLinks(post.links);\n    setTitle(post.title);\n    setLoading(false);\n    setBody(post.body);\n  }, [id]);\n  const handleAddField = () => {\n    setLinks(prevLinks => [...prevLinks, {\n      name: '',\n      link: ''\n    }]);\n  };\n  const handleDeletePicture = e => {\n    if (e.target.checked) {\n      setPath([...path, e.target.value]);\n    } else {\n      setPath(path.filter(item => item !== e.target.value));\n    }\n  };\n  const handleDeleteList = index => {\n    if (listCount.includes(index)) {\n      setListCount(listCount.filter(item => item !== index));\n    } else {\n      setListCount([...listCount, index]);\n    }\n  };\n  const deleteListHandler = () => {\n    const updatedLinks = links.filter((_, index) => !listCount.includes(index));\n    setLinks(updatedLinks);\n    setListCount([]);\n  };\n  const handleChange2 = (index, fieldName, value) => {\n    const updatedLinks = [...links];\n    const updatedLink = {\n      ...updatedLinks[index]\n    };\n    updatedLink[fieldName] = value;\n    updatedLinks[index] = updatedLink;\n    setLinks(updatedLinks);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const backEndLink = process.env.REACT_APP_BACKEND_URL;\n    setIsEditing(true);\n    try {\n      const updatedPostData = {\n        image,\n        title,\n        links,\n        path,\n        body\n      };\n      const res = await axios.put(`${backEndLink}/posts/${id}`, updatedPostData, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      navigate(`/posts/${res.data.post._id}`);\n      console.log(res);\n      // alert(res.data.message);\n      toast.success(res.data.message, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\"\n      });\n    } catch (err) {\n      setIsEditing(false);\n      console.error('Update error:', err);\n      // alert(err.response.data.message);\n      toast.err(err.response.data.message, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\"\n      });\n    }\n    // dispatch(editPost({ image, title, links, path, body }))\n  };\n\n  return {\n    post,\n    loading,\n    title,\n    links,\n    image,\n    body,\n    listCount,\n    path,\n    handleAddField,\n    handleDeletePicture,\n    handleDeleteList,\n    deleteListHandler,\n    handleChange2,\n    handleSubmit,\n    setBody,\n    setImage,\n    setTitle,\n    isEditing\n  };\n};\n_s(useEditPost, \"MbAGsElDlr/kwpo7paUDVh6gzXI=\", false, function () {\n  return [useParams, useNavigate, useSelector, useDispatch];\n});","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","axios","useDispatch","useSelector","getPost","toast","useEditPost","_s","id","navigate","post","state","loading","setLoading","isEditing","setIsEditing","title","setTitle","links","setLinks","image","setImage","body","setBody","listCount","setListCount","path","setPath","dispatch","handleAddField","prevLinks","name","link","handleDeletePicture","e","target","checked","value","filter","item","handleDeleteList","index","includes","deleteListHandler","updatedLinks","_","handleChange2","fieldName","updatedLink","handleSubmit","preventDefault","backEndLink","process","env","REACT_APP_BACKEND_URL","updatedPostData","res","put","withCredentials","headers","data","_id","console","log","success","message","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","err","error","response"],"sources":["/Users/adnan/Desktop/projects/setup/src/routes/edit/useEdit.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getPost } from '../../store/postSlice';\nimport { toast } from 'react-toastify';\n\n\nexport const useEditPost = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const {post} = useSelector(state => state.post)\n    const [loading, setLoading] = useState(true);\n    const [isEditing, setIsEditing] = useState(false);\n    const [title, setTitle] = useState('');\n    const [links, setLinks] = useState(post.links);\n    const [image, setImage] = useState({});\n    const [body, setBody] = useState('');\n    const [listCount, setListCount] = useState([]);\n    const [path, setPath] = useState([]);\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(getPost(id))\n        \n        setLinks(post.links);\n        setTitle(post.title);\n        setLoading(false);\n        setBody(post.body);\n    }, [id]);\n\n    const handleAddField = () => {\n        setLinks((prevLinks) => [...prevLinks, { name: '', link: '' }]);\n    };\n\n    const handleDeletePicture = (e) => {\n        if (e.target.checked) {\n            setPath([...path, e.target.value]);\n        } else {\n            setPath(path.filter((item) => item !== e.target.value));\n        }\n    };\n\n    const handleDeleteList = (index) => {\n        if (listCount.includes(index)) {\n            setListCount(listCount.filter((item) => item !== index));\n        } else {\n            setListCount([...listCount, index]);\n        }\n    };\n\n    const deleteListHandler = () => {\n        const updatedLinks = links.filter((_, index) => !listCount.includes(index));\n        setLinks(updatedLinks);\n        setListCount([]);\n    };\n\n    const handleChange2 = (index, fieldName, value) => {\n        const updatedLinks = [...links];\n        const updatedLink = { ...updatedLinks[index] }; \n        updatedLink[fieldName] = value;\n    \n        updatedLinks[index] = updatedLink; \n    \n        setLinks(updatedLinks); \n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const backEndLink = process.env.REACT_APP_BACKEND_URL\n        setIsEditing(true)\n        try {\n            const updatedPostData = { image, title, links, path, body };\n            const res = await axios.put(`${backEndLink}/posts/${id}`, updatedPostData, {\n                withCredentials: true,\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            });\n            navigate(`/posts/${res.data.post._id}`);\n            console.log(res)\n            // alert(res.data.message);\n            toast.success(res.data.message, {\n                position: \"top-right\",\n                autoClose: 5000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n                theme: \"light\",\n                });\n        } catch (err) {\n            setIsEditing(false)\n            console.error('Update error:', err);\n            // alert(err.response.data.message);\n            toast.err(err.response.data.message, {\n                position: \"top-right\",\n                autoClose: 5000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n                theme: \"light\",\n                });\n        }\n        // dispatch(editPost({ image, title, links, path, body }))\n    };\n\n    return {\n        post,\n        loading,\n        title,\n        links,\n        image,\n        body,\n        listCount,\n        path,\n        handleAddField,\n        handleDeletePicture,\n        handleDeleteList,\n        deleteListHandler,\n        handleChange2,\n        handleSubmit,\n        setBody,\n        setImage,\n        setTitle,\n        isEditing\n    };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}