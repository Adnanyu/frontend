{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{Login}from\"../../store/userSlice\";import axios from\"axios\";import{toast}from'react-toastify';export var useAuth=function useAuth(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({name:'',username:'',password:'',lastname:''}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevFormData){return _objectSpread(_objectSpread({},prevFormData),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var backEndLink,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();backEndLink=process.env.REACT_APP_BACKEND_URL;setIsLoading(true);_context.prev=3;_context.next=6;return axios.post(\"\".concat(backEndLink,\"/users\"),_objectSpread({},formData),{withCredentials:true});case 6:response=_context.sent;dispatch(Login(response.data.user));navigate('/posts');// alert(response.data.message)\ntoast.success(response.data.message,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);// alert(err.response.data.message);\ntoast.error(_context.t0.response.data.message,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});setIsLoading(false);case 16:case\"end\":return _context.stop();}},_callee,null,[[3,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return{handleSubmit:handleSubmit,handleChange:handleChange,formData:formData,isLoading:isLoading,navigate:navigate};};","map":{"version":3,"names":["useState","useDispatch","useNavigate","Login","axios","toast","useAuth","dispatch","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","name","username","password","lastname","_useState4","formData","setFormData","navigate","handleChange","e","_e$target","target","value","prevFormData","_objectSpread","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","backEndLink","response","wrap","_callee$","_context","prev","next","preventDefault","process","env","REACT_APP_BACKEND_URL","post","concat","withCredentials","sent","data","user","success","message","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","t0","error","stop","_x","apply","arguments"],"sources":["/Users/adnan/Desktop/projects/setup/src/routes/register/useAuth.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Login } from \"../../store/userSlice\";\nimport axios from \"axios\";\nimport { toast } from 'react-toastify';\n\nexport const useAuth = () => {\n  const dispatch = useDispatch()\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    name: '',\n    username: '',\n    password: '',\n    lastname: '',\n  });\n  const navigate = useNavigate()\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevFormData) => ({ ...prevFormData, [name]: value }));\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    setIsLoading(true)\n    try {\n      const response = await axios\n        .post(\n          `${backEndLink}/users`,\n          { ...formData },\n          { withCredentials: true }\n      )\n        dispatch(Login(response.data.user))\n        navigate('/posts')\n      // alert(response.data.message)\n      toast.success(response.data.message, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        });\n    } catch (err) {\n      // alert(err.response.data.message);\n      toast.error(err.response.data.message, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        });\n      setIsLoading(false)\n    }\n  };\n    \n    return {\n        handleSubmit,\n        handleChange,\n        formData,\n        isLoading,\n        navigate\n    }\n}"],"mappings":"8mBAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,uBAAuB,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAO,IAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAC3B,GAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,IAAAO,SAAA,CAAkCR,QAAQ,CAAC,KAAK,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAgCb,QAAQ,CAAC,CACvCc,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAAAC,UAAA,CAAAR,cAAA,CAAAG,UAAA,IALKM,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAM5B,GAAM,CAAAG,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAoB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1B,IAAAC,SAAA,CAAwBD,CAAC,CAACE,MAAM,CAAxBX,IAAI,CAAAU,SAAA,CAAJV,IAAI,CAAEY,KAAK,CAAAF,SAAA,CAALE,KAAK,CACnBN,WAAW,CAAC,SAACO,YAAY,SAAAC,aAAA,CAAAA,aAAA,IAAWD,YAAY,KAAAE,eAAA,IAAGf,IAAI,CAAGY,KAAK,IAAG,CAAC,CACrE,CAAC,CACD,GAAM,CAAAI,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOZ,CAAC,MAAAa,WAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC3BnB,CAAC,CAACoB,cAAc,CAAC,CAAC,CACZP,WAAW,CAAGQ,OAAO,CAACC,GAAG,CAACC,qBAAqB,CACrDlC,YAAY,CAAC,IAAI,CAAC,CAAA4B,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEO,CAAAtC,KAAK,CACzB2C,IAAI,IAAAC,MAAA,CACAZ,WAAW,WAAAR,aAAA,IACTT,QAAQ,EACb,CAAE8B,eAAe,CAAE,IAAK,CAC5B,CAAC,QALKZ,QAAQ,CAAAG,QAAA,CAAAU,IAAA,CAMZ3C,QAAQ,CAACJ,KAAK,CAACkC,QAAQ,CAACc,IAAI,CAACC,IAAI,CAAC,CAAC,CACnC/B,QAAQ,CAAC,QAAQ,CAAC,CACpB;AACAhB,KAAK,CAACgD,OAAO,CAAChB,QAAQ,CAACc,IAAI,CAACG,OAAO,CAAE,CACnCC,QAAQ,CAAE,WAAW,CACrBC,SAAS,CAAE,IAAI,CACfC,eAAe,CAAE,KAAK,CACtBC,YAAY,CAAE,IAAI,CAClBC,YAAY,CAAE,IAAI,CAClBC,SAAS,CAAE,IAAI,CACfC,QAAQ,CAAEC,SAAS,CACnBC,KAAK,CAAE,OACP,CAAC,CAAC,CAACvB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAwB,EAAA,CAAAxB,QAAA,aAEL;AACAnC,KAAK,CAAC4D,KAAK,CAACzB,QAAA,CAAAwB,EAAA,CAAI3B,QAAQ,CAACc,IAAI,CAACG,OAAO,CAAE,CACrCC,QAAQ,CAAE,WAAW,CACrBC,SAAS,CAAE,IAAI,CACfC,eAAe,CAAE,KAAK,CACtBC,YAAY,CAAE,IAAI,CAClBC,YAAY,CAAE,IAAI,CAClBC,SAAS,CAAE,IAAI,CACfC,QAAQ,CAAEC,SAAS,CACnBC,KAAK,CAAE,OACP,CAAC,CAAC,CACJnD,YAAY,CAAC,KAAK,CAAC,0BAAA4B,QAAA,CAAA0B,IAAA,MAAA/B,OAAA,iBAEtB,kBAtCK,CAAAL,YAAYA,CAAAqC,EAAA,SAAApC,IAAA,CAAAqC,KAAA,MAAAC,SAAA,OAsCjB,CAEC,MAAO,CACHvC,YAAY,CAAZA,YAAY,CACZR,YAAY,CAAZA,YAAY,CACZH,QAAQ,CAARA,QAAQ,CACRR,SAAS,CAATA,SAAS,CACTU,QAAQ,CAARA,QACJ,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}