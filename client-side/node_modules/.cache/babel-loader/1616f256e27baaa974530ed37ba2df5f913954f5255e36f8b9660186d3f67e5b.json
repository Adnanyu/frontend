{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Login } from '../../store/userSlice';\nimport { toast } from 'react-toastify';\nexport const useLoginHook = () => {\n  _s();\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const navigate = useNavigate();\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevFormData => ({\n      ...prevFormData,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    const backEndLink = process.env.REACT_APP_BACKEND_URL;\n    try {\n      await axios.post(`${backEndLink}/users/login`, {\n        ...formData\n      }, {\n        withCredentials: true\n      }).then(res => {\n        dispatch(Login(res.data.user));\n        alert(res.data.message);\n      });\n      navigate('/posts');\n    } catch (err) {\n      alert(err.response.data);\n      toast.error(err.response.data.m, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\"\n      });\n      setIsLoading(false);\n    }\n    console.log(formData);\n  };\n  return {\n    handleSubmit,\n    handleChange,\n    formData,\n    isLoading,\n    navigate\n  };\n};\n_s(useLoginHook, \"wcfQ0huAY8UJCodUxsz5CfHbCmk=\", false, function () {\n  return [useDispatch, useNavigate];\n});","map":{"version":3,"names":["axios","useState","useNavigate","useDispatch","Login","toast","useLoginHook","_s","dispatch","isLoading","setIsLoading","formData","setFormData","username","password","navigate","handleChange","e","name","value","target","prevFormData","handleSubmit","preventDefault","backEndLink","process","env","REACT_APP_BACKEND_URL","post","withCredentials","then","res","data","user","alert","message","err","response","error","m","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","console","log"],"sources":["/Users/adnan/Desktop/projects/setup/src/routes/login/useLogin.js"],"sourcesContent":["import axios from 'axios';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Login } from '../../store/userSlice';\nimport { toast } from 'react-toastify';\n\nexport const useLoginHook = () => {\n  const dispatch = useDispatch()\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n  const navigate = useNavigate();\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevFormData) => ({ ...prevFormData, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true)\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    \n    try {\n      await axios\n        .post(\n          `${backEndLink}/users/login`,\n          { ...formData },\n          { withCredentials: true }\n        )\n        .then((res) => {\n          dispatch(Login(res.data.user))\n          alert(res.data.message)\n        });\n      navigate('/posts')\n    } catch (err) {\n      alert(err.response.data);\n      toast.error(err.response.data.m, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        });\n      setIsLoading(false)\n    }\n\n    console.log(formData);\n  };\n    return {\n        handleSubmit,\n        handleChange,\n        formData,\n      isLoading,\n        navigate\n    }\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,KAAK,QAAQ,uBAAuB;AAC7C,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC;IACvCY,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE;EACZ,CAAC,CAAC;EACF,MAAMC,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAMc,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCR,WAAW,CAAES,YAAY,KAAM;MAAE,GAAGA,YAAY;MAAE,CAACH,IAAI,GAAGC;IAAM,CAAC,CAAC,CAAC;EACrE,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOL,CAAC,IAAK;IAChCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClBb,YAAY,CAAC,IAAI,CAAC;IAClB,MAAMc,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB;IAErD,IAAI;MACF,MAAM3B,KAAK,CACR4B,IAAI,CACF,GAAEJ,WAAY,cAAa,EAC5B;QAAE,GAAGb;MAAS,CAAC,EACf;QAAEkB,eAAe,EAAE;MAAK,CAC1B,CAAC,CACAC,IAAI,CAAEC,GAAG,IAAK;QACbvB,QAAQ,CAACJ,KAAK,CAAC2B,GAAG,CAACC,IAAI,CAACC,IAAI,CAAC,CAAC;QAC9BC,KAAK,CAACH,GAAG,CAACC,IAAI,CAACG,OAAO,CAAC;MACzB,CAAC,CAAC;MACJpB,QAAQ,CAAC,QAAQ,CAAC;IACpB,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACZF,KAAK,CAACE,GAAG,CAACC,QAAQ,CAACL,IAAI,CAAC;MACxB3B,KAAK,CAACiC,KAAK,CAACF,GAAG,CAACC,QAAQ,CAACL,IAAI,CAACO,CAAC,EAAE;QAC/BC,QAAQ,EAAE,WAAW;QACrBC,SAAS,EAAE,IAAI;QACfC,eAAe,EAAE,KAAK;QACtBC,YAAY,EAAE,IAAI;QAClBC,YAAY,EAAE,IAAI;QAClBC,SAAS,EAAE,IAAI;QACfC,QAAQ,EAAEC,SAAS;QACnBC,KAAK,EAAE;MACP,CAAC,CAAC;MACJtC,YAAY,CAAC,KAAK,CAAC;IACrB;IAEAuC,OAAO,CAACC,GAAG,CAACvC,QAAQ,CAAC;EACvB,CAAC;EACC,OAAO;IACHW,YAAY;IACZN,YAAY;IACZL,QAAQ;IACVF,SAAS;IACPM;EACJ,CAAC;AACL,CAAC;AAAAR,EAAA,CAtDYD,YAAY;EAAA,QACNH,WAAW,EAMXD,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}