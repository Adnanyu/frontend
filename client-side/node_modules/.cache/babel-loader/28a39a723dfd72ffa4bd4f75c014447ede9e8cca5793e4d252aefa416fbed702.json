{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/adnan/Desktop/projects/setup/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';export var useNew=function useNew(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState([{name:'',link:''}]),_useState4=_slicedToArray(_useState3,2),links=_useState4[0],setLinks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),body=_useState8[0],setBody=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),counter=_useState10[0],setCounter=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isLoading=_useState12[0],setIsLoading=_useState12[1];var navigate=useNavigate();var handleAddFeild=function handleAddFeild(){setCounter(counter+1);setLinks(function(prevLinks){return[].concat(_toConsumableArray(prevLinks),[{name:'',link:''}]);});};var handleChange2=function handleChange2(index,fieldName,value){var updatedInputFields=_toConsumableArray(links);updatedInputFields[index][fieldName]=value;setLinks(updatedInputFields);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var backEndLink;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();backEndLink=process.env.REACT_APP_BACKEND_URL;setIsLoading(true);_context.prev=3;_context.next=6;return axios.post(\"\".concat(backEndLink,\"/posts\"),{image:image,title:title,links:links,body:body},{withCredentials:true,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){console.log(res);navigate(\"/posts/\".concat(res.data.post._id));});case 6:_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](3);console.log(_context.t0);alert(_context.t0.response.data.message);setIsLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[3,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return{handleAddFeild:handleAddFeild,handleChange2:handleChange2,handleSubmit:handleSubmit,title:title,links:links,image:image,body:body,counter:counter,setBody:setBody,setImage:setImage,setTitle:setTitle,setCounter:setCounter,isLoading:isLoading};};","map":{"version":3,"names":["useState","useNavigate","axios","useNew","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","name","link","_useState4","links","setLinks","_useState5","_useState6","image","setImage","_useState7","_useState8","body","setBody","_useState9","_useState10","counter","setCounter","_useState11","_useState12","isLoading","setIsLoading","navigate","handleAddFeild","prevLinks","concat","_toConsumableArray","handleChange2","index","fieldName","value","updatedInputFields","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","backEndLink","wrap","_callee$","_context","prev","next","preventDefault","process","env","REACT_APP_BACKEND_URL","post","withCredentials","headers","then","res","console","log","data","_id","t0","alert","response","message","stop","_x","apply","arguments"],"sources":["/Users/adnan/Desktop/projects/setup/src/routes/new/useNew.js"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nexport const useNew = () => {\n  const [title, setTitle] = useState('');\n  const [links, setLinks] = useState([{ name: '', link: '' }]);\n  const [image, setImage] = useState([]);\n  const [body, setBody] = useState('');\n  const [counter, setCounter] = useState(1);\n  const [isLoading, setIsLoading] = useState(false)\n  const navigate = useNavigate();\n\n  const handleAddFeild = () => {\n    setCounter(counter + 1);\n    setLinks((prevLinks) => [...prevLinks, { name: '', link: '' }]);\n  };\n\n  const handleChange2 = (index, fieldName, value) => {\n    const updatedInputFields = [...links];\n    updatedInputFields[index][fieldName] = value;\n\n    setLinks(updatedInputFields);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    setIsLoading(true)\n    try {\n      await axios\n        .post(\n          `${backEndLink}/posts`,\n          { image, title, links, body },\n          {\n            withCredentials: true,\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        )\n        .then((res) => {\n          console.log(res)\n          navigate(`/posts/${res.data.post._id}`);\n        });\n    } catch (err) {\n      console.log(err)\n      alert(err.response.data.message);\n      setIsLoading(false)\n    }\n  };\n    \n    \n    \n    return {\n        handleAddFeild,\n        handleChange2,\n        handleSubmit,\n        title,\n        links,\n        image,\n        body,\n        counter,\n        setBody,\n        setImage,\n        setTitle,\n        setCounter,\n        isLoading\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}