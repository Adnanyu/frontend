{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const initialState = {\n  currentUser: null\n};\nexport const checkAuthentication = createAsyncThunk('user/checkAuthentication', async () => {\n  const backEndLink = import.meta.env.VITE_BACKEND_URL;\n  try {\n    const response = await axios.get(`${backEndLink}/users`, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const logOutUser = createAsyncThunk('user/logOutUser', async () => {\n  const backEndLink = import.meta.env.VITE_BACKEND_URL;\n  try {\n    const response = await axios.get(`${backEndLink}/users/logout`, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const savePost = createAsyncThunk('user/savePost', async (id, thunkApi) => {\n  const backEndLink = import.meta.env.VITE_BACKEND_URL;\n  try {\n    const response = await axios.post(`${backEndLink}/users/favorites`, {\n      id\n    }, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (error) {\n    console.error('error:', error);\n  }\n});\nconst UserSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    Login: (state, action) => {\n      state.currentUser = action.payload;\n    },\n    useLogout: state => {\n      state.currentUser = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(checkAuthentication.fulfilled, (state, action) => {\n      state.currentUser = action.payload;\n    });\n    builder.addCase(logOutUser.fulfilled, state => {\n      state.currentUser = null;\n    });\n    builder.addCase(savePost.fulfilled, (state, action) => {\n      state.currentUser = action.payload.user;\n    });\n  }\n});\nexport const {\n  usLogin,\n  useLogout\n} = UserSlice.actions;\nexport default UserSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","currentUser","checkAuthentication","backEndLink","import","meta","env","VITE_BACKEND_URL","response","get","withCredentials","data","error","console","log","logOutUser","savePost","id","thunkApi","post","UserSlice","name","reducers","Login","state","action","payload","useLogout","extraReducers","builder","addCase","fulfilled","user","usLogin","actions","reducer"],"sources":["/Users/adnan/Desktop/projects/setup/src/store/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport axios from 'axios';\n\nexport const initialState = {\n    currentUser: null\n}\n  \nexport const checkAuthentication = createAsyncThunk('user/checkAuthentication', async () => {\n    const backEndLink = import.meta.env.VITE_BACKEND_URL\n    try {\n        const response = await axios.get(`${backEndLink}/users`, { withCredentials: true })\n        return response.data\n    } catch (error) {\n        console.log(error)\n    }\n})\n\nexport const logOutUser = createAsyncThunk('user/logOutUser', async () => {\n    const backEndLink = import.meta.env.VITE_BACKEND_URL\n    try {\n        const response = await axios.get(`${backEndLink}/users/logout`, { withCredentials: true })\n        return response.data\n    } catch (error) {\n        console.log(error)\n    }\n})\n\nexport const savePost = createAsyncThunk('user/savePost', async (id, thunkApi) => {\n    const backEndLink = import.meta.env.VITE_BACKEND_URL\n    try {\n        const response = await axios.post(`${backEndLink}/users/favorites`, { id }, { withCredentials: true })\n        return response.data\n    }catch(error){\n        console.error('error:', error)\n    }\n})\n\nconst UserSlice = createSlice({\n    name: 'user',\n    initialState,\n    reducers: {\n        Login: (state, action) => {\n            state.currentUser = action.payload\n        },\n        useLogout: (state) => {\n            state.currentUser = null\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(checkAuthentication.fulfilled, (state, action) => {\n            state.currentUser = action.payload;\n        });\n        builder.addCase(logOutUser.fulfilled, (state) => {\n            state.currentUser = null\n        });\n        builder.addCase(savePost.fulfilled, (state, action) => {\n            state.currentUser = action.payload.user\n        })\n    }\n})\n\nexport const { usLogin, useLogout } = UserSlice.actions\nexport default UserSlice.reducer"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,YAAY,GAAG;EACxBC,WAAW,EAAE;AACjB,CAAC;AAED,OAAO,MAAMC,mBAAmB,GAAGJ,gBAAgB,CAAC,0BAA0B,EAAE,YAAY;EACxF,MAAMK,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,gBAAgB;EACpD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAE,GAAEN,WAAY,QAAO,EAAE;MAAEO,eAAe,EAAE;IAAK,CAAC,CAAC;IACnF,OAAOF,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMG,UAAU,GAAGjB,gBAAgB,CAAC,iBAAiB,EAAE,YAAY;EACtE,MAAMK,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,gBAAgB;EACpD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAE,GAAEN,WAAY,eAAc,EAAE;MAAEO,eAAe,EAAE;IAAK,CAAC,CAAC;IAC1F,OAAOF,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMI,QAAQ,GAAGlB,gBAAgB,CAAC,eAAe,EAAE,OAAOmB,EAAE,EAAEC,QAAQ,KAAK;EAC9E,MAAMf,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,gBAAgB;EACpD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACoB,IAAI,CAAE,GAAEhB,WAAY,kBAAiB,EAAE;MAAEc;IAAG,CAAC,EAAE;MAAEP,eAAe,EAAE;IAAK,CAAC,CAAC;IACtG,OAAOF,QAAQ,CAACG,IAAI;EACxB,CAAC,QAAMC,KAAK,EAAC;IACTC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;EAClC;AACJ,CAAC,CAAC;AAEF,MAAMQ,SAAS,GAAGvB,WAAW,CAAC;EAC1BwB,IAAI,EAAE,MAAM;EACZrB,YAAY;EACZsB,QAAQ,EAAE;IACNC,KAAK,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MACtBD,KAAK,CAACvB,WAAW,GAAGwB,MAAM,CAACC,OAAO;IACtC,CAAC;IACDC,SAAS,EAAGH,KAAK,IAAK;MAClBA,KAAK,CAACvB,WAAW,GAAG,IAAI;IAC5B;EACJ,CAAC;EACD2B,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,OAAO,CAAC5B,mBAAmB,CAAC6B,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MAC9DD,KAAK,CAACvB,WAAW,GAAGwB,MAAM,CAACC,OAAO;IACtC,CAAC,CAAC;IACFG,OAAO,CAACC,OAAO,CAACf,UAAU,CAACgB,SAAS,EAAGP,KAAK,IAAK;MAC7CA,KAAK,CAACvB,WAAW,GAAG,IAAI;IAC5B,CAAC,CAAC;IACF4B,OAAO,CAACC,OAAO,CAACd,QAAQ,CAACe,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACvB,WAAW,GAAGwB,MAAM,CAACC,OAAO,CAACM,IAAI;IAC3C,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEC,OAAO;EAAEN;AAAU,CAAC,GAAGP,SAAS,CAACc,OAAO;AACvD,eAAed,SAAS,CAACe,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}