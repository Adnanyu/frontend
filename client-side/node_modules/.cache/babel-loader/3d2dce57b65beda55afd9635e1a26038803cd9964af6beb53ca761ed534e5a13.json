{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';export var initialState={currentUser:null};export var checkAuthentication=createAsyncThunk('user/checkAuthentication',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var backEndLink,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:backEndLink=process.env.REACT_APP_BACKEND_URL;_context.prev=1;_context.next=4;return axios.get(\"\".concat(backEndLink,\"/users\"),{withCredentials:true});case 4:response=_context.sent;return _context.abrupt(\"return\",response.data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);})));export var logOutUser=createAsyncThunk('user/logOutUser',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var backEndLink,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:backEndLink=process.env.REACT_APP_BACKEND_URL;_context2.prev=1;_context2.next=4;return axios.get(\"\".concat(backEndLink,\"/users/logout\"),{withCredentials:true});case 4:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);})));export var savePost=createAsyncThunk('user/savePost',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,thunkApi){var backEndLink,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:backEndLink=process.env.REACT_APP_BACKEND_URL;_context3.prev=1;_context3.next=4;return axios.post(\"\".concat(backEndLink,\"/users/favorites\"),{id:id},{withCredentials:true});case 4:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.error('error:',_context3.t0);case 11:case\"end\":return _context3.stop();}},_callee3,null,[[1,8]]);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}());var UserSlice=createSlice({name:'user',initialState:initialState,reducers:{Login:function Login(state,action){state.currentUser=action.payload;},useLogout:function useLogout(state){state.currentUser=null;}},extraReducers:function extraReducers(builder){builder.addCase(checkAuthentication.fulfilled,function(state,action){state.currentUser=action.payload;});builder.addCase(logOutUser.fulfilled,function(state){state.currentUser=null;});builder.addCase(savePost.fulfilled,function(state,action){state.currentUser=action.payload.user;});}});var _UserSlice$actions=UserSlice.actions,Login=_UserSlice$actions.Login,useLogout=_UserSlice$actions.useLogout;export{Login,useLogout};export default UserSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","currentUser","checkAuthentication","_asyncToGenerator","_regeneratorRuntime","mark","_callee","backEndLink","response","wrap","_callee$","_context","prev","next","process","env","REACT_APP_BACKEND_URL","get","concat","withCredentials","sent","abrupt","data","t0","console","log","stop","logOutUser","_callee2","_callee2$","_context2","savePost","_ref3","_callee3","id","thunkApi","_callee3$","_context3","post","error","_x","_x2","apply","arguments","UserSlice","name","reducers","Login","state","action","payload","useLogout","extraReducers","builder","addCase","fulfilled","user","_UserSlice$actions","actions","reducer"],"sources":["/Users/adnan/Desktop/projects/setup/client-side/src/store/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport axios from 'axios';\n\nexport const initialState = {\n    currentUser: null\n}\n  \nexport const checkAuthentication = createAsyncThunk('user/checkAuthentication', async () => {\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    try {\n        const response = await axios.get(`${backEndLink}/users`, { withCredentials: true })\n        return response.data\n    } catch (error) {\n        console.log(error)\n    }\n})\n\nexport const logOutUser = createAsyncThunk('user/logOutUser', async () => {\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    try {\n        const response = await axios.get(`${backEndLink}/users/logout`, { withCredentials: true })\n        return response.data\n    } catch (error) {\n        console.log(error)\n    }\n})\n\nexport const savePost = createAsyncThunk('user/savePost', async (id, thunkApi) => {\n    const backEndLink = process.env.REACT_APP_BACKEND_URL\n    try {\n        const response = await axios.post(`${backEndLink}/users/favorites`, { id }, { withCredentials: true })\n        return response.data\n    }catch(error){\n        console.error('error:', error)\n    }\n})\n\nconst UserSlice = createSlice({\n    name: 'user',\n    initialState,\n    reducers: {\n        Login: (state, action) => {\n            state.currentUser = action.payload\n        },\n        useLogout: (state) => {\n            state.currentUser = null\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(checkAuthentication.fulfilled, (state, action) => {\n            state.currentUser = action.payload;\n        });\n        builder.addCase(logOutUser.fulfilled, (state) => {\n            state.currentUser = null\n        });\n        builder.addCase(savePost.fulfilled, (state, action) => {\n            state.currentUser = action.payload.user\n        })\n    }\n})\n\nexport const { Login, useLogout } = UserSlice.actions\nexport default UserSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}