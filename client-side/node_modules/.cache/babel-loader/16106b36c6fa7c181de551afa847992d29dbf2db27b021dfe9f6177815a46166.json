{"ast":null,"code":"import _slicedToArray from\"/Users/adnan/Desktop/projects/setup/client-side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useParams,useNavigate}from'react-router-dom';import{useEffect,useState}from'react';import{useDispatch,useSelector}from\"react-redux\";import{getPost}from\"../../store/postSlice\";import{toast}from\"react-toastify\";export var useView=function useView(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var _useSelector=useSelector(function(state){return state.post;}),post=_useSelector.post,isLoading=_useSelector.isLoading;useEffect(function(){dispatch(getPost(id));},[]);var deleteHandler=function deleteHandler(){var backEndLink=import.meta.env.BACKEND_URL||'http://localhost:8000';setIsDeleting(true);try{axios.delete(\"\".concat(backEndLink,\"/posts/\").concat(id),{withCredentials:true}).then(function(res){navigate('/posts');setIsDeleting(false);console.log(res);toast.success(res.data);});}catch(error){console.error('Axios error:',error);setIsDeleting(false);toast.error(error.response.data.message);}};return{deleteHandler:deleteHandler,id:id,post:post,isLoading:isLoading,isDeleting:isDeleting};};","map":{"version":3,"names":["axios","useParams","useNavigate","useEffect","useState","useDispatch","useSelector","getPost","toast","useView","_useParams","id","navigate","dispatch","_useState","_useState2","_slicedToArray","isDeleting","setIsDeleting","_useSelector","state","post","isLoading","deleteHandler","backEndLink","import","meta","env","BACKEND_URL","delete","concat","withCredentials","then","res","console","log","success","data","error","response","message"],"sources":["/Users/adnan/Desktop/projects/setup/client-side/src/routes/view/useView.js"],"sourcesContent":["import axios from \"axios\";\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useDispatch , useSelector} from \"react-redux\";\nimport { getPost } from \"../../store/postSlice\";\nimport { toast } from \"react-toastify\";\n\nexport const useView = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch()\n  const [isDeleting, setIsDeleting] = useState(false)\n  const { post, isLoading} = useSelector(state => state.post)\n\n  useEffect(() => {\n    dispatch(getPost(id))\n  }, []);\n\n  const deleteHandler = () => {\n    const backEndLink = import.meta.env.BACKEND_URL || 'http://localhost:8000'\n    setIsDeleting(true)\n    try {\n      axios\n        .delete(`${backEndLink}/posts/${id}`, { withCredentials: true })\n        .then((res) => {\n          navigate('/posts');\n          setIsDeleting(false)\n          console.log(res)\n          toast.success(res.data)\n        });\n    } catch (error) {\n      console.error('Axios error:', error);\n      setIsDeleting(false)\n      toast.error(error.response.data.message)\n    }\n  };\n    \n    return {\n        deleteHandler,\n        id,\n        post,\n      isLoading,\n        isDeleting\n    }\n};\n"],"mappings":"qIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAGC,WAAW,KAAO,aAAa,CACtD,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAO,IAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAC3B,IAAAC,UAAA,CAAeT,SAAS,CAAC,CAAC,CAAlBU,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,GAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAW,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,IAAAS,SAAA,CAAoCV,QAAQ,CAAC,KAAK,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,YAAA,CAA2Bb,WAAW,CAAC,SAAAc,KAAK,QAAI,CAAAA,KAAK,CAACC,IAAI,GAAC,CAAnDA,IAAI,CAAAF,YAAA,CAAJE,IAAI,CAAEC,SAAS,CAAAH,YAAA,CAATG,SAAS,CAEvBnB,SAAS,CAAC,UAAM,CACdU,QAAQ,CAACN,OAAO,CAACI,EAAE,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAY,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAM,CAAAC,WAAW,CAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,WAAW,EAAI,uBAAuB,CAC1EV,aAAa,CAAC,IAAI,CAAC,CACnB,GAAI,CACFlB,KAAK,CACF6B,MAAM,IAAAC,MAAA,CAAIN,WAAW,YAAAM,MAAA,CAAUnB,EAAE,EAAI,CAAEoB,eAAe,CAAE,IAAK,CAAC,CAAC,CAC/DC,IAAI,CAAC,SAACC,GAAG,CAAK,CACbrB,QAAQ,CAAC,QAAQ,CAAC,CAClBM,aAAa,CAAC,KAAK,CAAC,CACpBgB,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBzB,KAAK,CAAC4B,OAAO,CAACH,GAAG,CAACI,IAAI,CAAC,CACzB,CAAC,CAAC,CACN,CAAE,MAAOC,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCpB,aAAa,CAAC,KAAK,CAAC,CACpBV,KAAK,CAAC8B,KAAK,CAACA,KAAK,CAACC,QAAQ,CAACF,IAAI,CAACG,OAAO,CAAC,CAC1C,CACF,CAAC,CAEC,MAAO,CACHjB,aAAa,CAAbA,aAAa,CACbZ,EAAE,CAAFA,EAAE,CACFU,IAAI,CAAJA,IAAI,CACNC,SAAS,CAATA,SAAS,CACPL,UAAU,CAAVA,UACJ,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}